
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../_static/scikit_logo.svg">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-8.5.10">
    
    
      
        <title>stays - eds-scikit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../_static/extra.css">
    
      <link rel="stylesheet" href="../../../_static/termynal/termynal.css">
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#eds_scikitperiodstays" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            

<p><strong>New features: </strong>
Check out the new <a href="../../../functionalities/plotting/event_sequences/#visualizing-event-sequences">Event sequence</a> and <a href="../../../functionalities/plotting/age_pyramid/#visualizing-age-pyramid">Age pyramid</a> visualization tools !</p>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="eds-scikit" class="md-header__button md-logo" aria-label="eds-scikit" data-md-component="logo">
      
  <img src="../../../_static/scikit_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eds-scikit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              stays
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aphp/eds-scikit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eds-scikit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="eds-scikit" class="md-nav__button md-logo" aria-label="eds-scikit" data-md-component="logo">
      
  <img src="../../../_static/scikit_logo.svg" alt="logo">

    </a>
    eds-scikit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aphp/eds-scikit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eds-scikit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Understanding eds-scikit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Understanding eds-scikit" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Understanding eds-scikit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../project_description/" class="md-nav__link">
        Project description
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/generic/introduction/" class="md-nav__link">
        A gentle demo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Functionalities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Functionalities" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Functionalities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/generic/io/" class="md-nav__link">
        Connectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Phenotyping
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Phenotyping" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Phenotyping
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/phenotyping/base/" class="md-nav__link">
        The `Phenotype` class
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_2" type="checkbox" id="__nav_3_2_2" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_2">
          Available phenotypes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Available phenotypes" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_2">
          <span class="md-nav__icon md-icon"></span>
          Available phenotypes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/phenotyping/phenotypes/cancer/" class="md-nav__link">
        Cancer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/phenotyping/phenotypes/diabetes/" class="md-nav__link">
        Diabetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/phenotyping/phenotypes/suicide_attempt/" class="md-nav__link">
        Suicide Attempt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/phenotyping/phenotypes/psychiatric_disorder/" class="md-nav__link">
        Psychiatric disorder
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Patient's Course
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Patient's Course" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Patient's Course
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/patients-course/is_icu/" class="md-nav__link">
        ICU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/patients-course/is_emergency/" class="md-nav__link">
        Emergency Units
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/patients-course/visit_merging/" class="md-nav__link">
        Visit merging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/patients-course/consultation_dates/" class="md-nav__link">
        Consultation dates
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../functionalities/biology/">Biology</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Biology" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Biology
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/biology/cleaning/" class="md-nav__link">
        Cleaning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/biology/visualization/" class="md-nav__link">
        Visualization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/biology/vocabulary/" class="md-nav__link">
        Vocabulary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/biology/tutorial/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Plotting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plotting" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Plotting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/plotting/event_sequences/" class="md-nav__link">
        Event sequence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/plotting/flowchart/" class="md-nav__link">
        Generating inclusion/exclusion flowchart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../functionalities/plotting/age_pyramid/" class="md-nav__link">
        Age pyramid
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Recipes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recipes" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Recipes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recipes/flowchart.ipynb" class="md-nav__link">
        Generating inclusion/exclusion flowchart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recipes/small-cohorts/" class="md-nav__link">
        Saving small cohorts locally
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/private-resources/" class="md-nav__link">
        A note on private resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Biology
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Biology" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Biology
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/concepts-sets/" class="md-nav__link">
        Concept sets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/biology-config/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Care sites
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Care sites" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Care sites
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/care-site-hierarchy/" class="md-nav__link">
        Hierarchy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/care-site-emergency/" class="md-nav__link">
        Emergency
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/synthetic-data/" class="md-nav__link">
        Synthetic data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Code Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Code Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">eds_scikit</a>
          
            <label for="__nav_6_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="eds_scikit" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          eds_scikit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_2" type="checkbox" id="__nav_6_1_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../biology/">biology</a>
          
            <label for="__nav_6_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="biology" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_2">
          <span class="md-nav__icon md-icon"></span>
          biology
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_2_2" type="checkbox" id="__nav_6_1_2_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../biology/cleaning/">cleaning</a>
          
            <label for="__nav_6_1_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="cleaning" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          cleaning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/cleaning/cohort/" class="md-nav__link">
        cohort
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/cleaning/main/" class="md-nav__link">
        main
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/cleaning/transform/" class="md-nav__link">
        transform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/cleaning/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_2_3" type="checkbox" id="__nav_6_1_2_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../biology/utils/">utils</a>
          
            <label for="__nav_6_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="utils" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/utils/config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/utils/process_concepts/" class="md-nav__link">
        process_concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/utils/process_measurement/" class="md-nav__link">
        process_measurement
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_2_4" type="checkbox" id="__nav_6_1_2_4" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../biology/viz/">viz</a>
          
            <label for="__nav_6_1_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="viz" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          viz
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/viz/aggregate/" class="md-nav__link">
        aggregate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/viz/plot/" class="md-nav__link">
        plot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/viz/wrapper/" class="md-nav__link">
        wrapper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_3" type="checkbox" id="__nav_6_1_3" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../datasets/">datasets</a>
          
            <label for="__nav_6_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="datasets" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_3">
          <span class="md-nav__icon md-icon"></span>
          datasets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_3_2" type="checkbox" id="__nav_6_1_3_2" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../datasets/generation_scripts/">generation_scripts</a>
          
            <label for="__nav_6_1_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="generation_scripts" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_3_2">
          <span class="md-nav__icon md-icon"></span>
          generation_scripts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/generation_scripts/care_site_hierarchy/" class="md-nav__link">
        care_site_hierarchy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_3_3" type="checkbox" id="__nav_6_1_3_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../datasets/synthetic/">synthetic</a>
          
            <label for="__nav_6_1_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="synthetic" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_3_3">
          <span class="md-nav__icon md-icon"></span>
          synthetic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/base_dataset/" class="md-nav__link">
        base_dataset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/biology/" class="md-nav__link">
        biology
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/ccam/" class="md-nav__link">
        ccam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/consultation_dates/" class="md-nav__link">
        consultation_dates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/event_sequences/" class="md-nav__link">
        event_sequences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/hierarchy/" class="md-nav__link">
        hierarchy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/icd10/" class="md-nav__link">
        icd10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/person/" class="md-nav__link">
        person
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/stay_duration/" class="md-nav__link">
        stay_duration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/suicide_attempt/" class="md-nav__link">
        suicide_attempt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/tagging/" class="md-nav__link">
        tagging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/synthetic/visit_merging/" class="md-nav__link">
        visit_merging
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_4" type="checkbox" id="__nav_6_1_4" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../emergency/">emergency</a>
          
            <label for="__nav_6_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="emergency" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_4">
          <span class="md-nav__icon md-icon"></span>
          emergency
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../emergency/emergency_care_site/" class="md-nav__link">
        emergency_care_site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../emergency/emergency_visit/" class="md-nav__link">
        emergency_visit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_5" type="checkbox" id="__nav_6_1_5" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../event/">event</a>
          
            <label for="__nav_6_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="event" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_5">
          <span class="md-nav__icon md-icon"></span>
          event
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/ccam/" class="md-nav__link">
        ccam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/consultations/" class="md-nav__link">
        consultations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/diabetes/" class="md-nav__link">
        diabetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/from_code/" class="md-nav__link">
        from_code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/icd10/" class="md-nav__link">
        icd10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../event/suicide_attempt/" class="md-nav__link">
        suicide_attempt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_6" type="checkbox" id="__nav_6_1_6" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../icu/">icu</a>
          
            <label for="__nav_6_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="icu" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_6">
          <span class="md-nav__icon md-icon"></span>
          icu
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../icu/icu_care_site/" class="md-nav__link">
        icu_care_site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../icu/icu_visit/" class="md-nav__link">
        icu_visit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_7" type="checkbox" id="__nav_6_1_7" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../io/">io</a>
          
            <label for="__nav_6_1_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="io" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_7">
          <span class="md-nav__icon md-icon"></span>
          io
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/data_quality/" class="md-nav__link">
        data_quality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/files/" class="md-nav__link">
        files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/hive/" class="md-nav__link">
        hive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/i2b2_mapping/" class="md-nav__link">
        i2b2_mapping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/postgres/" class="md-nav__link">
        postgres
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../io/settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_8" type="checkbox" id="__nav_6_1_8" checked>
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">period</a>
          
            <label for="__nav_6_1_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="period" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_8">
          <span class="md-nav__icon md-icon"></span>
          period
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          stays
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        stays
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.cleaning" class="md-nav__link">
    cleaning()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.merge_visits" class="md-nav__link">
    merge_visits()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.get_stays_duration" class="md-nav__link">
    get_stays_duration()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tagging_functions/" class="md-nav__link">
        tagging_functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_9" type="checkbox" id="__nav_6_1_9" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../phenotype/">phenotype</a>
          
            <label for="__nav_6_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="phenotype" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_9">
          <span class="md-nav__icon md-icon"></span>
          phenotype
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phenotype/base/" class="md-nav__link">
        base
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_9_3" type="checkbox" id="__nav_6_1_9_3" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../phenotype/cancer/">cancer</a>
          
            <label for="__nav_6_1_9_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="cancer" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_9_3">
          <span class="md-nav__icon md-icon"></span>
          cancer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phenotype/cancer/cancer/" class="md-nav__link">
        cancer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_9_4" type="checkbox" id="__nav_6_1_9_4" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../phenotype/diabetes/">diabetes</a>
          
            <label for="__nav_6_1_9_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="diabetes" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_9_4">
          <span class="md-nav__icon md-icon"></span>
          diabetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phenotype/diabetes/diabetes/" class="md-nav__link">
        diabetes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_9_5" type="checkbox" id="__nav_6_1_9_5" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../phenotype/psychiatric_disorder/">psychiatric_disorder</a>
          
            <label for="__nav_6_1_9_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="psychiatric_disorder" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_9_5">
          <span class="md-nav__icon md-icon"></span>
          psychiatric_disorder
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phenotype/psychiatric_disorder/psychiatric_disorder/" class="md-nav__link">
        psychiatric_disorder
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_9_6" type="checkbox" id="__nav_6_1_9_6" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../phenotype/suicide_attempt/">suicide_attempt</a>
          
            <label for="__nav_6_1_9_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="suicide_attempt" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_9_6">
          <span class="md-nav__icon md-icon"></span>
          suicide_attempt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phenotype/suicide_attempt/suicide_attempt/" class="md-nav__link">
        suicide_attempt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_10" type="checkbox" id="__nav_6_1_10" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../plot/">plot</a>
          
            <label for="__nav_6_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="plot" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_10">
          <span class="md-nav__icon md-icon"></span>
          plot
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plot/age_pyramid/" class="md-nav__link">
        age_pyramid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plot/event_sequences/" class="md-nav__link">
        event_sequences
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_11" type="checkbox" id="__nav_6_1_11" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../resources/">resources</a>
          
            <label for="__nav_6_1_11">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="resources" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_11">
          <span class="md-nav__icon md-icon"></span>
          resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/reg/" class="md-nav__link">
        reg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_12" type="checkbox" id="__nav_6_1_12" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../structures/">structures</a>
          
            <label for="__nav_6_1_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="structures" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_12">
          <span class="md-nav__icon md-icon"></span>
          structures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../structures/attributes/" class="md-nav__link">
        attributes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../structures/description/" class="md-nav__link">
        description
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_13" type="checkbox" id="__nav_6_1_13" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../utils/">utils</a>
          
            <label for="__nav_6_1_13">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_13">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/bunch/" class="md-nav__link">
        bunch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/checks/" class="md-nav__link">
        checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_13_4" type="checkbox" id="__nav_6_1_13_4" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../utils/custom_implem/">custom_implem</a>
          
            <label for="__nav_6_1_13_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="custom_implem" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_13_4">
          <span class="md-nav__icon md-icon"></span>
          custom_implem
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/custom_implem/custom_implem/" class="md-nav__link">
        custom_implem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/custom_implem/cut/" class="md-nav__link">
        cut
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/datetime_helpers/" class="md-nav__link">
        datetime_helpers
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_13_6" type="checkbox" id="__nav_6_1_13_6" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../utils/flowchart/">flowchart</a>
          
            <label for="__nav_6_1_13_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="flowchart" data-md-level="4">
        <label class="md-nav__title" for="__nav_6_1_13_6">
          <span class="md-nav__icon md-icon"></span>
          flowchart
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/flowchart/flowchart/" class="md-nav__link">
        flowchart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/framework/" class="md-nav__link">
        framework
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/hierarchy/" class="md-nav__link">
        hierarchy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/logging/" class="md-nav__link">
        logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/test_utils/" class="md-nav__link">
        test_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/typing/" class="md-nav__link">
        typing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.cleaning" class="md-nav__link">
    cleaning()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.merge_visits" class="md-nav__link">
    merge_visits()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eds_scikit.period.stays.get_stays_duration" class="md-nav__link">
    get_stays_duration()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/aphp/eds-scikit/edit/master/docs/eds_scikit/period/stays.py" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="eds_scikitperiodstays"><code>eds_scikit.period.stays</code></h1>


<div class="doc doc-object doc-module">



  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="eds_scikit.period.stays.cleaning">
        <span class="doc doc-object-name doc-function-name">cleaning</span>


</h3>
<div class="highlight"><pre><span></span><code><span class="n">cleaning</span><span class="p">(</span><span class="n">vo</span><span class="p">,</span> <span class="n">long_stay_threshold</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">long_stay_filtering</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">remove_deleted_visits</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Preprocessing of visits before merging them in stays.
The function will split the input <code>vo</code> DataFrame into 2, one that
should undergo the merging procedure, and one that shouldn't.
Depending on the input parameters, 3 type of visits can be prevented to
undergo the merging procedure:</p>
<ul>
<li>Too long visits</li>
<li>Too long AND unclosed visits</li>
<li>Removed visits</li>
</ul>
<p>See the <a href="#eds_scikit.period.stays.merge_visits">merge_visits()</a> function for details of the parameters</p>

      <details class="quote">
        <summary>Source code in <code>eds_scikit/period/stays.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cleaning</span><span class="p">(</span>
    <span class="n">vo</span><span class="p">,</span>
    <span class="n">long_stay_threshold</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span>
    <span class="n">long_stay_filtering</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="n">remove_deleted_visits</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Preprocessing of visits before merging them in stays.</span>
<span class="sd">    The function will split the input `vo` DataFrame into 2, one that</span>
<span class="sd">    should undergo the merging procedure, and one that shouldn&#39;t.</span>
<span class="sd">    Depending on the input parameters, 3 type of visits can be prevented to</span>
<span class="sd">    undergo the merging procedure:</span>

<span class="sd">    - Too long visits</span>
<span class="sd">    - Too long AND unclosed visits</span>
<span class="sd">    - Removed visits</span>

<span class="sd">    See the [merge_visits()][eds_scikit.period.stays.merge_visits] function for details of the parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">LONG_STAY_FILTERING_VALUES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
    <span class="n">DELETED_ROW_VALUE</span> <span class="o">=</span> <span class="s2">&quot;supprim&quot;</span>

    <span class="k">if</span> <span class="n">long_stay_filtering</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">LONG_STAY_FILTERING_VALUES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Unknown value for `long_stay_filtering`.</span>
<span class="s2">            Accepted values are </span><span class="si">{</span><span class="n">LONG_STAY_FILTERING_VALUES</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">remove_deleted_visits</span><span class="p">:</span>
        <span class="n">deleted_visit_mask</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;row_status_source_value&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">DELETED_ROW_VALUE</span>
    <span class="n">no_starting_date_mask</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_start_datetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>
    <span class="n">no_ending_date_mask</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>

    <span class="n">vo</span><span class="p">[</span>
        <span class="s2">&quot;visit_end_datetime_calc&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">open_stay_end_datetime</span>  <span class="c1"># Cannot use fillna() with datetime in Koalas</span>
    <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span>
        <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">too_long_stays_mask</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">substract_datetime</span><span class="p">(</span><span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">],</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_start_datetime&quot;</span><span class="p">])</span>
        <span class="o">&gt;=</span> <span class="n">long_stay_threshold</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">mask</span> <span class="o">=</span> <span class="n">no_starting_date_mask</span>

    <span class="k">if</span> <span class="n">long_stay_filtering</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">|</span> <span class="n">too_long_stays_mask</span>

    <span class="k">elif</span> <span class="n">long_stay_filtering</span> <span class="o">==</span> <span class="s2">&quot;open&quot;</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">|</span> <span class="p">(</span><span class="n">too_long_stays_mask</span> <span class="o">&amp;</span> <span class="n">no_ending_date_mask</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">remove_deleted_visits</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">|</span> <span class="n">deleted_visit_mask</span>

    <span class="k">return</span> <span class="n">vo</span><span class="p">[</span><span class="o">~</span><span class="n">mask</span><span class="p">],</span> <span class="n">vo</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="eds_scikit.period.stays.merge_visits">
        <span class="doc doc-object-name doc-function-name">merge_visits</span>


</h3>
<div class="highlight"><pre><span></span><code><span class="n">merge_visits</span><span class="p">(</span><span class="n">vo</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">remove_deleted_visits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">long_stay_threshold</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">),</span> <span class="n">long_stay_filtering</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">max_timedelta</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">merge_different_hospitals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">merge_different_source_values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hospitaliss&#39;</span><span class="p">,</span> <span class="s1">&#39;urgence&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Merge "close" visit occurrences to consider them as a single stay
by adding a <code>STAY_ID</code> and <code>CONTIGUOUS_STAY_ID</code> columns to the DataFrame.</p>
<p>The value of these columns will be the <code>visit_occurrence_id</code> of the first (meaning the oldest)
visit of the stay.</p>
<p>From a temporal point of view, we consider that two visits belong to the same stay if either:</p>
<ul>
<li>They intersect</li>
<li>The time difference between the end of the most recent and the start of the oldest
  is lower than <code>max_timedelta</code> (for <code>STAY_ID</code>) or 0 (for <code>CONTIGUOUS_STAY_ID</code>)</li>
</ul>
<p>Additionally, other parameters are available to further adjust the merging rules. See below.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>vo</code></td>
          <td class="doc-param-details">
            <p>The <code>visit_occurrence</code> DataFrame, with at least the following columns:
- visit_occurrence_id
- person_id
- visit_start_datetime_calc (from preprocessing)
- visit_end_datetime (from preprocessing)
Depending on the input parameters, additional columns may be required:
- care_site_id (if <code>merge_different_hospitals == True</code>)
- visit_source_value (if <code>merge_different_source_values != False</code>)
- row_status_source_value (if <code>remove_deleted_visits= True</code>)</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="eds_scikit.utils.typing.DataFrame">DataFrame</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>remove_deleted_visits</code></td>
          <td class="doc-param-details">
            <p>Wether to remove deleted visits from the merging procedure.
Deleted visits are extracted via the <code>row_status_source_value</code> column</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code>bool</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>True</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>long_stay_filtering</code></td>
          <td class="doc-param-details">
            <p>Filtering method for long and/or non-closed visits. First of all, visits with no starting date
won't be merged with any other visit, and visits with no ending date will have a temporary
"theoretical" ending date set by <code>datetime.now()</code>. That being said, some visits are sometimes years long
because they weren't closed at time. If other visits occurred during this timespan,
they could be all merged into the same stay. To avoid this issue, filtering can be done
depending on the <code>long_stay_filtering</code> value:</p>
<ul>
<li><code>all</code>: All long stays (closed and open) are removed from the merging procedure</li>
<li><code>open</code>: Only long open stays are removed from the merging procedure</li>
<li><code>None</code>: No filtering is done on long visits</li>
</ul>
<p>Long stays are determined by the <code>long_stay_threshold</code> value.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="typing.Optional">Optional</span>[str]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;all&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>long_stay_threshold</code></td>
          <td class="doc-param-details">
            <p>Minimum visit duration value to consider a visit as candidate for "long visits filtering"</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="datetime.timedelta">timedelta</span></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>timedelta(days=365)</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>open_stay_end_datetime</code></td>
          <td class="doc-param-details">
            <p>Datetime to use in order to fill the <code>visit_end_datetime</code> of open visits. This is necessary in
order to compute stay duration and to filter long stays. If not provided <code>datetime.now()</code> will be used.
You might provide the extraction date of your data here.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="typing.Optional">Optional</span>[<span title="datetime.datetime">datetime</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>max_timedelta</code></td>
          <td class="doc-param-details">
            <p>Maximum time difference between the end of a visit and the start of another to consider
them as belonging to the same stay. This duration is internally converted in seconds before
comparing. Thus, if you want e.g. to merge visits happening in two consecutive days, you should use
<code>timedelta(days=2)</code> and NOT <code>timedelta(days=1)</code> in order to take into account extreme cases such as
an first visit ending on Monday at 00h01 AM and another one starting at 23h59 PM on Tuesday</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="datetime.timedelta">timedelta</span></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>timedelta(days=2)</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>merge_different_hospitals</code></td>
          <td class="doc-param-details">
            <p>Wether to allow visits occurring in different hospitals to be merged into a same stay</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code>bool</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>False</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>merge_different_source_values</code></td>
          <td class="doc-param-details">
            <p>Wether to allow visits with different <code>visit_source_value</code> to be merged into a same stay. Values can be:</p>
<ul>
<li><code>True</code>: the <code>visit_source_value</code> isn't taken into account for the merging</li>
<li><code>False</code>: only visits with the same <code>visit_source_value</code> can be merged into a same stay</li>
<li><code>List[str]</code>: only visits which <code>visit_source_value</code> is in the provided list can be merged together.</li>
</ul>
<p><strong>Warning</strong>: You should avoid merging visits where <code>visit_source_value == "hospitalisation incomplte"</code>,
because those stays are often never closed.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="typing.Union">Union</span>[bool, <span title="typing.List">List</span>[str]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>[&#39;hospitaliss&#39;, &#39;urgence&#39;]</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <code>vo</code>
          </td>
          <td class="doc-returns-details">
            <p>Visit occurrence DataFrame with additional <code>STAY_ID</code> column</p>
              <p>
                <span class="doc-returns-annotation">
                  <b>TYPE:</b>
                    <code><span title="eds_scikit.utils.typing.DataFrame">DataFrame</span></code>
                </span>
              </p>
          </td>
        </tr>
    </tbody>
  </table>

<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">    1 : [&#39;A&#39;, 999, datetime(2021,1,1), datetime(2021,1,5), &#39;hospitaliss&#39;],</span>
<span class="go">    2 : [&#39;B&#39;, 999, datetime(2021,1,4), datetime(2021,1,8), &#39;hospitaliss&#39;],</span>
<span class="go">    3 : [&#39;C&#39;, 999, datetime(2021,1,12), datetime(2021,1,18), &#39;hospitaliss&#39;],</span>
<span class="go">    4 : [&#39;D&#39;, 999, datetime(2021,1,13), datetime(2021,1,14), &#39;urgence&#39;],</span>
<span class="go">    5 : [&#39;E&#39;, 999, datetime(2021,1,19), datetime(2021,1,21), &#39;hospitaliss&#39;],</span>
<span class="go">    6 : [&#39;F&#39;, 999, datetime(2021,1,25), datetime(2021,1,27), &#39;hospitaliss&#39;],</span>
<span class="go">    7 : [&#39;G&#39;, 999, datetime(2017,1,1), None, &quot;hospitaliss&quot;]</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
<span class="go">    data,</span>
<span class="go">    orient=&quot;index&quot;,</span>
<span class="go">    columns=[</span>
<span class="go">        &quot;visit_occurrence_id&quot;,</span>
<span class="go">        &quot;person_id&quot;,</span>
<span class="go">        &quot;visit_start_datetime&quot;,</span>
<span class="go">        &quot;visit_end_datetime&quot;,</span>
<span class="go">        &quot;visit_source_value&quot;,</span>
<span class="go">    ],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vo</span>
<span class="go">  visit_occurrence_id  person_id visit_start_datetime visit_end_datetime visit_source_value</span>
<span class="go">1                   A        999           2021-01-01         2021-01-05       hospitaliss</span>
<span class="go">2                   B        999           2021-01-04         2021-01-08       hospitaliss</span>
<span class="go">3                   C        999           2021-01-12         2021-01-18       hospitaliss</span>
<span class="go">4                   D        999           2021-01-13         2021-01-14            urgence</span>
<span class="go">5                   E        999           2021-01-19         2021-01-21       hospitaliss</span>
<span class="go">6                   F        999           2021-01-25         2021-01-27       hospitaliss</span>
<span class="go">7                   G        999           2017-01-01                NaT       hospitaliss</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">vo</span> <span class="o">=</span> <span class="n">merge_visits</span><span class="p">(</span>
<span class="go">        vo,</span>
<span class="go">        remove_deleted_visits=True,</span>
<span class="go">        long_stay_threshold=timedelta(days=365),</span>
<span class="go">        long_stay_filtering=&quot;all&quot;,</span>
<span class="go">        max_timedelta=timedelta(hours=24),</span>
<span class="go">        merge_different_hospitals=False,</span>
<span class="go">        merge_different_source_values=[&quot;hospitaliss&quot;, &quot;urgence&quot;],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vo</span>
<span class="go">  visit_occurrence_id  person_id visit_start_datetime visit_end_datetime visit_source_value STAY_ID CONTIGUOUS_STAY_ID</span>
<span class="go">1                   A        999           2021-01-01         2021-01-05       hospitaliss       A                  A</span>
<span class="go">2                   B        999           2021-01-04         2021-01-08       hospitaliss       A                  A</span>
<span class="go">3                   C        999           2021-01-12         2021-01-18       hospitaliss       C                  C</span>
<span class="go">4                   D        999           2021-01-13         2021-01-14            urgence       C                  C</span>
<span class="go">5                   E        999           2021-01-19         2021-01-21       hospitaliss       C                  E</span>
<span class="go">6                   F        999           2021-01-25         2021-01-27       hospitaliss       F                  F</span>
<span class="go">7                   G        999           2017-01-01                NaT       hospitaliss       G                  G</span>
</code></pre></div>

      <details class="quote">
        <summary>Source code in <code>eds_scikit/period/stays.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@concept_checker</span><span class="p">(</span><span class="n">concepts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">merge_visits</span><span class="p">(</span>
    <span class="n">vo</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">remove_deleted_visits</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">long_stay_threshold</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">),</span>
    <span class="n">long_stay_filtering</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_timedelta</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">merge_different_hospitals</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">merge_different_source_values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hospitaliss&quot;</span><span class="p">,</span> <span class="s2">&quot;urgence&quot;</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Merge &quot;close&quot; visit occurrences to consider them as a single stay</span>
<span class="sd">    by adding a ``STAY_ID`` and ``CONTIGUOUS_STAY_ID`` columns to the DataFrame.</span>

<span class="sd">    The value of these columns will be the `visit_occurrence_id` of the first (meaning the oldest)</span>
<span class="sd">    visit of the stay.</span>

<span class="sd">    From a temporal point of view, we consider that two visits belong to the same stay if either:</span>

<span class="sd">    - They intersect</span>
<span class="sd">    - The time difference between the end of the most recent and the start of the oldest</span>
<span class="sd">      is lower than ``max_timedelta`` (for ``STAY_ID``) or 0 (for ``CONTIGUOUS_STAY_ID``)</span>

<span class="sd">    Additionally, other parameters are available to further adjust the merging rules. See below.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    vo : DataFrame</span>
<span class="sd">        The ``visit_occurrence`` DataFrame, with at least the following columns:</span>
<span class="sd">        - visit_occurrence_id</span>
<span class="sd">        - person_id</span>
<span class="sd">        - visit_start_datetime_calc (from preprocessing)</span>
<span class="sd">        - visit_end_datetime (from preprocessing)</span>
<span class="sd">        Depending on the input parameters, additional columns may be required:</span>
<span class="sd">        - care_site_id (if ``merge_different_hospitals == True``)</span>
<span class="sd">        - visit_source_value (if ``merge_different_source_values != False``)</span>
<span class="sd">        - row_status_source_value (if ``remove_deleted_visits= True``)</span>
<span class="sd">    remove_deleted_visits: bool</span>
<span class="sd">        Wether to remove deleted visits from the merging procedure.</span>
<span class="sd">        Deleted visits are extracted via the `row_status_source_value` column</span>
<span class="sd">    long_stay_filtering : Optional[str]</span>
<span class="sd">        Filtering method for long and/or non-closed visits. First of all, visits with no starting date</span>
<span class="sd">        won&#39;t be merged with any other visit, and visits with no ending date will have a temporary</span>
<span class="sd">        &quot;theoretical&quot; ending date set by ``datetime.now()``. That being said, some visits are sometimes years long</span>
<span class="sd">        because they weren&#39;t closed at time. If other visits occurred during this timespan,</span>
<span class="sd">        they could be all merged into the same stay. To avoid this issue, filtering can be done</span>
<span class="sd">        depending on the ``long_stay_filtering`` value:</span>

<span class="sd">        - ``all``: All long stays (closed and open) are removed from the merging procedure</span>
<span class="sd">        - ``open``: Only long open stays are removed from the merging procedure</span>
<span class="sd">        - ``None``: No filtering is done on long visits</span>

<span class="sd">        Long stays are determined by the ``long_stay_threshold`` value.</span>
<span class="sd">    long_stay_threshold : timedelta</span>
<span class="sd">        Minimum visit duration value to consider a visit as candidate for &quot;long visits filtering&quot;</span>
<span class="sd">    open_stay_end_datetime: Optional[datetime]</span>
<span class="sd">        Datetime to use in order to fill the `visit_end_datetime` of open visits. This is necessary in</span>
<span class="sd">        order to compute stay duration and to filter long stays. If not provided `datetime.now()` will be used.</span>
<span class="sd">        You might provide the extraction date of your data here.</span>
<span class="sd">    max_timedelta : timedelta</span>
<span class="sd">        Maximum time difference between the end of a visit and the start of another to consider</span>
<span class="sd">        them as belonging to the same stay. This duration is internally converted in seconds before</span>
<span class="sd">        comparing. Thus, if you want e.g. to merge visits happening in two consecutive days, you should use</span>
<span class="sd">        `timedelta(days=2)` and NOT `timedelta(days=1)` in order to take into account extreme cases such as</span>
<span class="sd">        an first visit ending on Monday at 00h01 AM and another one starting at 23h59 PM on Tuesday</span>
<span class="sd">    merge_different_hospitals : bool</span>
<span class="sd">        Wether to allow visits occurring in different hospitals to be merged into a same stay</span>
<span class="sd">    merge_different_source_values : Union[bool, List[str]]</span>
<span class="sd">        Wether to allow visits with different `visit_source_value` to be merged into a same stay. Values can be:</span>

<span class="sd">        - `True`: the `visit_source_value` isn&#39;t taken into account for the merging</span>
<span class="sd">        - `False`: only visits with the same `visit_source_value` can be merged into a same stay</span>
<span class="sd">        - `List[str]`: only visits which `visit_source_value` is in the provided list can be merged together.</span>

<span class="sd">        **Warning**: You should avoid merging visits where `visit_source_value == &quot;hospitalisation incomplte&quot;`,</span>
<span class="sd">        because those stays are often never closed.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    vo : DataFrame</span>
<span class="sd">        Visit occurrence DataFrame with additional `STAY_ID` column</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; import pandas as pd</span>
<span class="sd">    &gt;&gt;&gt; from datetime import datetime, timedelta</span>
<span class="sd">    &gt;&gt;&gt; data = {</span>
<span class="sd">        1 : [&#39;A&#39;, 999, datetime(2021,1,1), datetime(2021,1,5), &#39;hospitaliss&#39;],</span>
<span class="sd">        2 : [&#39;B&#39;, 999, datetime(2021,1,4), datetime(2021,1,8), &#39;hospitaliss&#39;],</span>
<span class="sd">        3 : [&#39;C&#39;, 999, datetime(2021,1,12), datetime(2021,1,18), &#39;hospitaliss&#39;],</span>
<span class="sd">        4 : [&#39;D&#39;, 999, datetime(2021,1,13), datetime(2021,1,14), &#39;urgence&#39;],</span>
<span class="sd">        5 : [&#39;E&#39;, 999, datetime(2021,1,19), datetime(2021,1,21), &#39;hospitaliss&#39;],</span>
<span class="sd">        6 : [&#39;F&#39;, 999, datetime(2021,1,25), datetime(2021,1,27), &#39;hospitaliss&#39;],</span>
<span class="sd">        7 : [&#39;G&#39;, 999, datetime(2017,1,1), None, &quot;hospitaliss&quot;]</span>
<span class="sd">    }</span>
<span class="sd">    &gt;&gt;&gt; vo = pd.DataFrame.from_dict(</span>
<span class="sd">        data,</span>
<span class="sd">        orient=&quot;index&quot;,</span>
<span class="sd">        columns=[</span>
<span class="sd">            &quot;visit_occurrence_id&quot;,</span>
<span class="sd">            &quot;person_id&quot;,</span>
<span class="sd">            &quot;visit_start_datetime&quot;,</span>
<span class="sd">            &quot;visit_end_datetime&quot;,</span>
<span class="sd">            &quot;visit_source_value&quot;,</span>
<span class="sd">        ],</span>
<span class="sd">    )</span>
<span class="sd">    &gt;&gt;&gt; vo</span>
<span class="sd">      visit_occurrence_id  person_id visit_start_datetime visit_end_datetime visit_source_value</span>
<span class="sd">    1                   A        999           2021-01-01         2021-01-05       hospitaliss</span>
<span class="sd">    2                   B        999           2021-01-04         2021-01-08       hospitaliss</span>
<span class="sd">    3                   C        999           2021-01-12         2021-01-18       hospitaliss</span>
<span class="sd">    4                   D        999           2021-01-13         2021-01-14            urgence</span>
<span class="sd">    5                   E        999           2021-01-19         2021-01-21       hospitaliss</span>
<span class="sd">    6                   F        999           2021-01-25         2021-01-27       hospitaliss</span>
<span class="sd">    7                   G        999           2017-01-01                NaT       hospitaliss</span>

<span class="sd">    &gt;&gt;&gt; vo = merge_visits(</span>
<span class="sd">            vo,</span>
<span class="sd">            remove_deleted_visits=True,</span>
<span class="sd">            long_stay_threshold=timedelta(days=365),</span>
<span class="sd">            long_stay_filtering=&quot;all&quot;,</span>
<span class="sd">            max_timedelta=timedelta(hours=24),</span>
<span class="sd">            merge_different_hospitals=False,</span>
<span class="sd">            merge_different_source_values=[&quot;hospitaliss&quot;, &quot;urgence&quot;],</span>
<span class="sd">    )</span>
<span class="sd">    &gt;&gt;&gt; vo</span>
<span class="sd">      visit_occurrence_id  person_id visit_start_datetime visit_end_datetime visit_source_value STAY_ID CONTIGUOUS_STAY_ID</span>
<span class="sd">    1                   A        999           2021-01-01         2021-01-05       hospitaliss       A                  A</span>
<span class="sd">    2                   B        999           2021-01-04         2021-01-08       hospitaliss       A                  A</span>
<span class="sd">    3                   C        999           2021-01-12         2021-01-18       hospitaliss       C                  C</span>
<span class="sd">    4                   D        999           2021-01-13         2021-01-14            urgence       C                  C</span>
<span class="sd">    5                   E        999           2021-01-19         2021-01-21       hospitaliss       C                  E</span>
<span class="sd">    6                   F        999           2021-01-25         2021-01-27       hospitaliss       F                  F</span>
<span class="sd">    7                   G        999           2017-01-01                NaT       hospitaliss       G                  G</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Preprocessing</span>
    <span class="n">vo_to_merge</span><span class="p">,</span> <span class="n">vo_to_not_merge</span> <span class="o">=</span> <span class="n">cleaning</span><span class="p">(</span>
        <span class="n">vo</span><span class="p">,</span>
        <span class="n">remove_deleted_visits</span><span class="o">=</span><span class="n">remove_deleted_visits</span><span class="p">,</span>
        <span class="n">long_stay_threshold</span><span class="o">=</span><span class="n">long_stay_threshold</span><span class="p">,</span>
        <span class="n">long_stay_filtering</span><span class="o">=</span><span class="n">long_stay_filtering</span><span class="p">,</span>
        <span class="n">open_stay_end_datetime</span><span class="o">=</span><span class="n">open_stay_end_datetime</span>
        <span class="k">if</span> <span class="n">open_stay_end_datetime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
    <span class="p">)</span>

    <span class="n">fw</span> <span class="o">=</span> <span class="n">get_framework</span><span class="p">(</span><span class="n">vo_to_merge</span><span class="p">)</span>

    <span class="n">grouping_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;person_id&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">merge_different_hospitals</span><span class="p">:</span>
        <span class="n">grouping_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;care_site_id&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">merge_different_source_values</span><span class="p">:</span>
        <span class="n">grouping_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;visit_source_value&quot;</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">merge_different_source_values</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">fw</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">visit_source_value</span><span class="o">=</span><span class="n">merge_different_source_values</span><span class="p">,</span>
                <span class="n">grouped_visit_source_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">vo_to_merge</span> <span class="o">=</span> <span class="n">vo_to_merge</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;visit_source_value&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
        <span class="n">vo_to_merge</span><span class="p">[</span><span class="s2">&quot;grouped_visit_source_value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vo_to_merge</span><span class="p">[</span>
            <span class="s2">&quot;grouped_visit_source_value&quot;</span>
        <span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">grouping_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;grouped_visit_source_value&quot;</span><span class="p">)</span>

    <span class="c1"># Cartesian product</span>
    <span class="n">merged</span> <span class="o">=</span> <span class="n">vo_to_merge</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">vo_to_merge</span><span class="p">,</span>
        <span class="n">on</span><span class="o">=</span><span class="n">grouping_keys</span><span class="p">,</span>
        <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
        <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;_1&quot;</span><span class="p">,</span> <span class="s2">&quot;_2&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Keeping only visits where 1 occurs before 2</span>
    <span class="n">merged</span> <span class="o">=</span> <span class="n">merged</span><span class="p">[</span>
        <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;visit_start_datetime_1&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;visit_start_datetime_2&quot;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="c1"># Checking correct overlap</span>
    <span class="n">th</span> <span class="o">=</span> <span class="n">max_timedelta</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

    <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;overlap&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">substract_datetime</span><span class="p">(</span>
        <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;visit_start_datetime_2&quot;</span><span class="p">],</span> <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc_1&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;to_merge&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="s2">&quot;overlap&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">th</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">merged</span><span class="p">[</span><span class="s2">&quot;contiguous&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">merged</span><span class="p">[</span><span class="s2">&quot;overlap&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_first</span><span class="p">(</span>
        <span class="n">merged</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">contiguous_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a boolean flag for each visit, telling if the visit</span>
<span class="sd">        if the first of a stay.</span>
<span class="sd">        The ``contiguous_only`` parameter controls if the visits have to be</span>
<span class="sd">        contiguous in the stay</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">flag_col</span> <span class="o">=</span> <span class="s2">&quot;contiguous&quot;</span> <span class="k">if</span> <span class="n">contiguous_only</span> <span class="k">else</span> <span class="s2">&quot;to_merge&quot;</span>
        <span class="n">flag_name</span> <span class="o">=</span> <span class="s2">&quot;1_is_first_contiguous&quot;</span> <span class="k">if</span> <span class="n">contiguous_only</span> <span class="k">else</span> <span class="s2">&quot;1_is_first&quot;</span>
        <span class="n">concept_prefix</span> <span class="o">=</span> <span class="s2">&quot;CONTIGUOUS_&quot;</span> <span class="k">if</span> <span class="n">contiguous_only</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

        <span class="c1"># If the only previous visit to be merged with is itself, we found our first visit !</span>
        <span class="n">first_visits</span> <span class="o">=</span> <span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;visit_occurrence_id_2&quot;</span><span class="p">)[</span><span class="n">flag_col</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="n">first_visits</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">flag_name</span>

        <span class="c1"># Adding this boolean flag to the merged DataFrame</span>
        <span class="n">merged</span> <span class="o">=</span> <span class="n">merged</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
            <span class="n">first_visits</span><span class="p">,</span>
            <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;visit_occurrence_id_1&quot;</span><span class="p">,</span>
            <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Getting the corresponding first visit</span>
        <span class="n">first_visit</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
                <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">flag_name</span><span class="p">,</span> <span class="s2">&quot;visit_start_datetime_1&quot;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;visit_occurrence_id_2&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">first</span><span class="p">()[</span><span class="s2">&quot;visit_occurrence_id_1&quot;</span><span class="p">]</span>
            <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span>
                <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
                    <span class="s2">&quot;visit_occurrence_id_1&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">concept_prefix</span><span class="si">}</span><span class="s2">STAY_ID&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;visit_occurrence_id_2&quot;</span><span class="p">:</span> <span class="s2">&quot;visit_occurrence_id&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">merged</span><span class="p">,</span> <span class="n">first_visit</span>

    <span class="n">merged</span><span class="p">,</span> <span class="n">first_contiguous_visit</span> <span class="o">=</span> <span class="n">get_first</span><span class="p">(</span><span class="n">merged</span><span class="p">,</span> <span class="n">contiguous_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">merged</span><span class="p">,</span> <span class="n">first_visit</span> <span class="o">=</span> <span class="n">get_first</span><span class="p">(</span><span class="n">merged</span><span class="p">,</span> <span class="n">contiguous_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Concatenating merge visits with previously discarded ones</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">fw</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">vo_to_merge</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
                <span class="n">first_visit</span><span class="p">,</span>
                <span class="n">on</span><span class="o">=</span><span class="s2">&quot;visit_occurrence_id&quot;</span><span class="p">,</span>
                <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
                <span class="n">first_contiguous_visit</span><span class="p">,</span>
                <span class="n">on</span><span class="o">=</span><span class="s2">&quot;visit_occurrence_id&quot;</span><span class="p">,</span>
                <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">vo_to_not_merge</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Adding visit_occurrence_id as STAY_ID and CONTIGUOUS_STAY_ID to discarded visits</span>
    <span class="n">results</span><span class="p">[</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span>
        <span class="n">results</span><span class="p">[</span><span class="s2">&quot;visit_occurrence_id&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">results</span><span class="p">[</span><span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span>
        <span class="n">results</span><span class="p">[</span><span class="s2">&quot;visit_occurrence_id&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Removing tmp columns</span>

    <span class="n">vo</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">results</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">(</span>
            <span class="nb">set</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
            <span class="o">&amp;</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">,</span> <span class="s2">&quot;grouped_visit_source_value&quot;</span><span class="p">])</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="eds_scikit.period.stays.get_stays_duration">
        <span class="doc doc-object-name doc-function-name">get_stays_duration</span>


</h3>
<div class="highlight"><pre><span></span><code><span class="n">get_stays_duration</span><span class="p">(</span><span class="n">vo</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">algo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;sum_of_visits_duration&#39;</span><span class="p">,</span> <span class="n">missing_end_date_handling</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Computes stay duration.
The input DataFrame should contain the <code>STAY_ID</code> and <code>CONTIGUOUS_STAY_ID</code> columns,
that can be computed via the <code>merge_visits()</code> function.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>vo</code></td>
          <td class="doc-param-details">
            <p>visit occurrence DataFrame with the <code>STAY_ID</code> and <code>CONTIGUOUS_STAY_ID</code> columns</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="eds_scikit.utils.typing.DataFrame">DataFrame</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>algo</code></td>
          <td class="doc-param-details">
            <p>Which algo to use for computing stay durations. Available values are:</p>
<ul>
<li><code>"sum_of_visits_duration"</code>: The stay duration will correspond to the sum of each visit duration in the stay.</li>
<li><code>"visits_date_difference"</code>: The stay duration will correspond to the difference between the end date of the last visit and the start date of the first visit.</li>
</ul>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code>str</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;sum_of_visits_duration&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>missing_end_date_handling</code></td>
          <td class="doc-param-details">
            <p>How to handle visits with no end date. Available values are:</p>
<ul>
<li><code>"fill"</code>: Missing values are filled with <code>datetime.now()</code></li>
<li><code>"coerce"</code>: Missing values are handled as such, so duration of stays with open visits will be NaN.</li>
</ul>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code>str</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;fill&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>open_stay_end_datetime</code></td>
          <td class="doc-param-details">
            <p>Used if <code>missing_end_date_handling == "fill"</code>. Provide the <code>datetime</code> with which
open stays should be ended. Leave to <code>None</code> in order to used <code>datetime.now()</code></p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="typing.Optional">Optional</span>[<span title="datetime.datetime">datetime</span>]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><span title="eds_scikit.utils.typing.DataFrame">DataFrame</span></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><em>stay</em> DataFrame with <code>STAY_ID</code> as index, and the following columns:</p>
<ul>
<li><code>"person_id"</code></li>
<li><code>"t_start"</code>: The start date of the first visit of the stay</li>
<li><code>"t_end"</code>: The end date of the last visit of the stay</li>
<li><code>"STAY_DURATION"</code>: The duration (in hours) of the stay</li>
</ul>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a title="eds_scikit.utils.checks.MissingConceptError" href="../../utils/checks/#eds_scikit.utils.checks.MissingConceptError">MissingConceptError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>If <code>STAY_ID</code> and <code>CONTIGUOUS_STAY_ID</code> are not in the input columns.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>eds_scikit/period/stays.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@algo_checker</span><span class="p">(</span><span class="n">algos</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sum_of_visits_duration&quot;</span><span class="p">,</span> <span class="s2">&quot;visits_date_difference&quot;</span><span class="p">])</span>
<span class="nd">@concept_checker</span><span class="p">(</span><span class="n">concepts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;STAY_DURATION&quot;</span><span class="p">],</span> <span class="n">only_adds_concepts</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_stays_duration</span><span class="p">(</span>
    <span class="n">vo</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">algo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sum_of_visits_duration&quot;</span><span class="p">,</span>
    <span class="n">missing_end_date_handling</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fill&quot;</span><span class="p">,</span>
    <span class="n">open_stay_end_datetime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes stay duration.</span>
<span class="sd">    The input DataFrame should contain the `STAY_ID` and `CONTIGUOUS_STAY_ID` columns,</span>
<span class="sd">    that can be computed via the `merge_visits()` function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    vo : DataFrame</span>
<span class="sd">        visit occurrence DataFrame with the `STAY_ID` and `CONTIGUOUS_STAY_ID` columns</span>
<span class="sd">    algo : str</span>
<span class="sd">        Which algo to use for computing stay durations. Available values are:</span>

<span class="sd">        - `&quot;sum_of_visits_duration&quot;`: The stay duration will correspond to the sum of each visit duration in the stay.</span>
<span class="sd">        - `&quot;visits_date_difference&quot;`: The stay duration will correspond to the difference between the end date of the last visit and the start date of the first visit.</span>
<span class="sd">    missing_end_date_handling : str</span>
<span class="sd">        How to handle visits with no end date. Available values are:</span>

<span class="sd">        - `&quot;fill&quot;`: Missing values are filled with `datetime.now()`</span>
<span class="sd">        - `&quot;coerce&quot;`: Missing values are handled as such, so duration of stays with open visits will be NaN.</span>
<span class="sd">    open_stay_end_datetime: Optional[datetime]</span>
<span class="sd">        Used if `missing_end_date_handling == &quot;fill&quot;`. Provide the `datetime` with which</span>
<span class="sd">        open stays should be ended. Leave to `None` in order to used `datetime.now()`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    DataFrame</span>
<span class="sd">        *stay* DataFrame with `STAY_ID` as index, and the following columns:</span>

<span class="sd">        - `&quot;person_id&quot;`</span>
<span class="sd">        - `&quot;t_start&quot;`: The start date of the first visit of the stay</span>
<span class="sd">        - `&quot;t_end&quot;`: The end date of the last visit of the stay</span>
<span class="sd">        - `&quot;STAY_DURATION&quot;`: The duration (in hours) of the stay</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    MissingConceptError</span>
<span class="sd">        If `STAY_ID` and `CONTIGUOUS_STAY_ID` are not in the input columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">set</span><span class="p">((</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">vo</span><span class="o">.</span><span class="n">columns</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">MissingConceptError</span><span class="p">(</span>
            <span class="n">df_name</span><span class="o">=</span><span class="s2">&quot;visit_occurence&quot;</span><span class="p">,</span>
            <span class="n">required_concepts</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;should be computed via &#39;merge_visits&#39;&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;should be computed via &#39;merge_visits&#39;&quot;</span><span class="p">),</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">missing_end_date_handling</span> <span class="o">==</span> <span class="s2">&quot;fill&quot;</span><span class="p">:</span>
        <span class="c1"># Cannot use fillna() with datetime in Koalas</span>
        <span class="k">if</span> <span class="n">open_stay_end_datetime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">open_stay_end_datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">open_stay_end_datetime</span>
        <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span>
            <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">missing_end_date_handling</span> <span class="o">==</span> <span class="s2">&quot;coerce&quot;</span><span class="p">:</span>
        <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vo</span><span class="p">[</span><span class="s2">&quot;visit_end_datetime&quot;</span><span class="p">]</span>

    <span class="n">agg_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">person_id</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;person_id&quot;</span><span class="p">,</span> <span class="s2">&quot;first&quot;</span><span class="p">),</span>
        <span class="n">t_start</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;visit_start_datetime&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
        <span class="n">t_end</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;visit_end_datetime_calc&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">algo</span> <span class="o">==</span> <span class="s2">&quot;sum_of_visits_duration&quot;</span><span class="p">:</span>

        <span class="n">agg_dict</span><span class="p">[</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;first&quot;</span><span class="p">)</span>

        <span class="n">contiguous_stays</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;CONTIGUOUS_STAY_ID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="o">**</span><span class="n">agg_dict</span><span class="p">)</span>
        <span class="n">contiguous_stays</span><span class="p">[</span><span class="s2">&quot;CONTIGUOUS_STAY_DURATION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">substract_datetime</span><span class="p">(</span>
            <span class="n">contiguous_stays</span><span class="p">[</span><span class="s2">&quot;t_end&quot;</span><span class="p">],</span> <span class="n">contiguous_stays</span><span class="p">[</span><span class="s2">&quot;t_start&quot;</span><span class="p">],</span> <span class="n">out</span><span class="o">=</span><span class="s2">&quot;hours&quot;</span>
        <span class="p">)</span>

        <span class="n">agg_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">person_id</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;person_id&quot;</span><span class="p">,</span> <span class="s2">&quot;first&quot;</span><span class="p">),</span>
            <span class="n">t_start</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;t_start&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span>
            <span class="n">t_end</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;t_end&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
            <span class="n">STAY_DURATION</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;CONTIGUOUS_STAY_DURATION&quot;</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">stays</span> <span class="o">=</span> <span class="n">contiguous_stays</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="o">**</span><span class="n">agg_dict</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">algo</span> <span class="o">==</span> <span class="s2">&quot;visits_date_difference&quot;</span><span class="p">:</span>

        <span class="n">stays</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;STAY_ID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="o">**</span><span class="n">agg_dict</span><span class="p">)</span>
        <span class="n">stays</span><span class="p">[</span><span class="s2">&quot;STAY_DURATION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">substract_datetime</span><span class="p">(</span>
            <span class="n">stays</span><span class="p">[</span><span class="s2">&quot;t_end&quot;</span><span class="p">],</span> <span class="n">stays</span><span class="p">[</span><span class="s2">&quot;t_start&quot;</span><span class="p">],</span> <span class="n">out</span><span class="o">=</span><span class="s2">&quot;hours&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">missing_end_date_handling</span> <span class="o">==</span> <span class="s2">&quot;coerce&quot;</span><span class="p">:</span>
        <span class="n">stays</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stays</span><span class="p">[</span><span class="s2">&quot;t_end&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">(),</span> <span class="s2">&quot;STAY_DURATION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NaN</span>

    <span class="k">return</span> <span class="n">stays</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: `eds_scikit.period`" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              `eds_scikit.period`
            </div>
          </div>
        </a>
      
      
        
        <a href="../tagging_functions/" class="md-footer__link md-footer__link--next" aria-label="Next: tagging_functions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              tagging_functions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["header.autohide", "navigation.tracking", "navigation.instant", "navigation.indexes", "navigation.top", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
      
        <script src="../../../_static/extra.js"></script>
      
        <script src="../../../_static/termynal/termynal.js"></script>
      
    
    
  </body>
</html>